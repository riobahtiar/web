---
import { Icon } from "astro-icon/components";

interface Props {
  type?: "default" | "gradient" | "bordered";
  icon?: string;
  dismissible?: boolean;
}

const { type = "default", icon, dismissible = false } = Astro.props;

const typeStyles = {
  default: "bg-primary text-primary-content",
  gradient: "bg-gradient-to-r from-primary to-secondary text-primary-content",
  bordered: "bg-base-100 border-2 border-primary text-base-content",
};
---

<div
  class={`banner my-6 rounded-lg p-6 ${typeStyles[type]} ${dismissible ? "pr-12" : ""} relative overflow-hidden`}
>
  {/* Background pattern (optional) */}
  <div class="absolute inset-0 opacity-10">
    <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, currentColor 1px, transparent 0); background-size: 20px 20px;"></div>
  </div>

  <div class="relative z-10 flex items-start gap-4">
    {icon && (
      <div class="flex-shrink-0 mt-1">
        <Icon name={icon} class="h-8 w-8" />
      </div>
    )}
    <div class="flex-1">
      <div class="prose prose-lg max-w-none prose-headings:text-current prose-p:text-current prose-strong:text-current">
        <slot />
      </div>
    </div>
  </div>

  {dismissible && (
    <button
      class="absolute top-4 right-4 btn btn-ghost btn-sm btn-circle opacity-70 hover:opacity-100"
      onclick="this.parentElement.style.display='none'"
      aria-label="Dismiss banner"
    >
      <Icon name="tabler:x" class="h-5 w-5" />
    </button>
  )}
</div>

<style>
  .banner :global(p:first-child) {
    margin-top: 0;
  }

  .banner :global(p:last-child) {
    margin-bottom: 0;
  }

  .banner :global(a) {
    @apply underline decoration-2 underline-offset-2 hover:decoration-4 transition-all;
  }
</style>
